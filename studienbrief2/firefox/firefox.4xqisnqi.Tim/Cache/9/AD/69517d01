function ULSxaw(){var o=new Object;o.ULSTeamName="Search Server";o.ULSFileName="ajaxtoolkit.js";return o;}
Type.registerNamespace("AjaxControlToolkit");AjaxControlToolkit._CommonToolkitScripts=function(){};AjaxControlToolkit._CommonToolkitScripts.prototype={getCurrentStyle:function(b,c,d){ULSxaw:;var a=null;if(b){if(b.currentStyle)a=b.currentStyle[c];else if(document.defaultView&&document.defaultView.getComputedStyle){var e=document.defaultView.getComputedStyle(b,null);if(e)a=e[c]}if(!a&&b.style.getPropertyValue)a=b.style.getPropertyValue(c);else if(!a&&b.style.getAttribute)a=b.style.getAttribute(c)}if(!a||a==""||typeof a==="undefined")if(typeof d!="undefined")a=d;else a=null;return a},getLocation:function(a){ULSxaw:;if(a===document.documentElement)return new Sys.UI.Point(0,0);return Sys.UI.DomElement.getLocation(a)},setLocation:function(b,a){ULSxaw:;Sys.UI.DomElement.setLocation(b,a.x,a.y)},getBounds:function(a){ULSxaw:;var b=$common.getLocation(a);return new Sys.UI.Bounds(b.x,b.y,a.offsetWidth||0,a.offsetHeight||0)},getVisible:function(a){ULSxaw:;return a&&"none"!=$common.getCurrentStyle(a,"display")&&"hidden"!=$common.getCurrentStyle(a,"visibility")},setVisible:function(a,b){ULSxaw:;if(a&&b!=$common.getVisible(a)){if(b)a.style.display="block";else a.style.display="none";a.style.visibility=b?"visible":"hidden"}},prepareHiddenElementForATDeviceUpdate:function(){ULSxaw:;var a=document.getElementById("hiddenInputToUpdateATBuffer_CommonToolkitScripts");if(!a){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("value","1");a.setAttribute("id","hiddenInputToUpdateATBuffer_CommonToolkitScripts");a.setAttribute("name","hiddenInputToUpdateATBuffer_CommonToolkitScripts");document.forms[0]&&document.forms[0].appendChild(a)}},updateFormToRefreshATDeviceBuffer:function(){ULSxaw:;var a=document.getElementById("hiddenInputToUpdateATBuffer_CommonToolkitScripts");if(a)if(a.getAttribute("value")=="1")a.setAttribute("value","0");else a.setAttribute("value","1")}};var CommonToolkitScripts=AjaxControlToolkit.CommonToolkitScripts=new AjaxControlToolkit._CommonToolkitScripts,$common=CommonToolkitScripts;Sys.UI.DomElement.getVisible=$common.getVisible;Sys.UI.DomElement.setVisible=$common.setVisible;Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoadedCallOut);function pageLoadedCallOut(f,e){ULSxaw:;var a=e.get_panelsUpdated();if(a&&a.length>0){for(i=0;i<a.length;i++){var b=a[i];if(b&&b.id.endsWith("UpdatePanelPeopleCore")){AdjustPopupPanel(b);var c=b.getElementsByTagName("a");if(c&&c.length>0){var d=c[0];if(d){d.focus();break}}}}$common.updateFormToRefreshATDeviceBuffer()}}function AdjustPopupPanel(a,b){ULSxaw:;if(Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7)){if(a&&a.currentStyle.direction=="rtl"){a.dir="";a.dir="rtl"}if(b)b.style.display="block"}}Sys.Timer=function(){ULSxaw:;Sys.Timer.initializeBase(this);this._interval=1e3;this._enabled=false;this._timer=null};Sys.Timer.prototype={get_interval:function(){ULSxaw:;return this._interval},set_interval:function(a){ULSxaw:;if(this._interval!==a){this._interval=a;this.raisePropertyChanged("interval");if(!this.get_isUpdating()&&this._timer!==null){this._stopTimer();this._startTimer()}}},get_enabled:function(){ULSxaw:;return this._enabled},set_enabled:function(a){ULSxaw:;if(a!==this.get_enabled()){this._enabled=a;this.raisePropertyChanged("enabled");if(!this.get_isUpdating())if(a)this._startTimer();else this._stopTimer()}},add_tick:function(a){ULSxaw:;this.get_events().addHandler("tick",a)},remove_tick:function(a){ULSxaw:;this.get_events().removeHandler("tick",a)},dispose:function(){ULSxaw:;this.set_enabled(false);this._stopTimer();Sys.Timer.callBaseMethod(this,"dispose")},_timerCallback:function(){ULSxaw:;var a=this.get_events().getHandler("tick");a&&a(this,Sys.EventArgs.Empty)},_startTimer:function(){ULSxaw:;this._timer=window.setInterval(Function.createDelegate(this,this._timerCallback),this._interval)},_stopTimer:function(){ULSxaw:;window.clearInterval(this._timer);this._timer=null}};Sys.Timer.descriptor={properties:[{name:"interval",type:Number},{name:"enabled",type:Boolean}],events:[{name:"tick"}]};Sys.Timer.registerClass("Sys.Timer",Sys.Component);AjaxControlToolkit.PopupBehavior=function(a){ULSxaw:;AjaxControlToolkit.PopupBehavior.initializeBase(this,[a]);this._parentElement=null;this._parentElementID=null;this._firstPopup=true;this._originalParent=null;this._visible=false};AjaxControlToolkit.PopupBehavior.prototype={initialize:function(){ULSxaw:;AjaxControlToolkit.PopupBehavior.callBaseMethod(this,"initialize");this._hidePopup();this.get_element().style.position="absolute"},dispose:function(){ULSxaw:;var a=this.get_element();if(a){this._visible&&this.hide();if(this._originalParent){a.parentNode.removeChild(a);this._originalParent.appendChild(a);this._originalParent=null}}this._parentElement=null;AjaxControlToolkit.PopupBehavior.callBaseMethod(this,"dispose")},show:function(){ULSxaw:;if(this._visible)return;this._visible=true;var a=this.get_element();$common.setVisible(a,true)},hide:function(){ULSxaw:;if(!this._visible)return;this._visible=false;this._hidePopup();this._hideCleanup()},_hidePopup:function(){ULSxaw:;var a=this.get_element();$common.setVisible(a,false);if(a.originalWidth){a.style.width=a.originalWidth+"px";a.originalWidth=null}},_hideCleanup:function(){ULSxaw:;var a=this.get_element();this.raiseHidden(Sys.EventArgs.Empty)},get_parentElement:function(){ULSxaw:;if(!this._parentElement&&this._parentElementID){this.set_parentElement($get(this._parentElementID));Sys.Debug.assert(this._parentElement!=null,String.format(AjaxControlToolkit.Resources.PopupExtender_NoParentElement,this._parentElementID))}return this._parentElement},set_parentElement:function(a){ULSxaw:;this._parentElement=a;this.raisePropertyChanged("parentElement")},get_parentElementID:function(){ULSxaw:;if(this._parentElement)return this._parentElement.id;return this._parentElementID},set_parentElementID:function(a){ULSxaw:;this._parentElementID=a;this.get_isInitialized()&&this.set_parentElement($get(a))},get_visible:function(){ULSxaw:;return this._visible},add_hidden:function(a){ULSxaw:;this.get_events().addHandler("hidden",a)},remove_hidden:function(a){ULSxaw:;this.get_events().removeHandler("hidden",a)},raiseHidden:function(b){ULSxaw:;var a=this.get_events().getHandler("hidden");a&&a(this,b)}};AjaxControlToolkit.PopupBehavior.registerClass("AjaxControlToolkit.PopupBehavior",Sys.UI.Behavior);AjaxControlToolkit.PopupControlBehavior=function(a){ULSxaw:;AjaxControlToolkit.PopupControlBehavior.initializeBase(this,[a]);this._popupControlID=null;this._popupShowingScript=null;this._popupHiddenScript=null;this._hoverDelay=0;this._unhoverDelay=0;this._position=null;this._popupElement=null;this._popupBehavior=null;this._popupVisible=false;this._clickHandler=null;this._keyDownHandler=null;this._mouseOverHandler=null;this._mouseOutHandler=null;this._popupKeyDownHandler=null;this._popupClickHandler=null;this._popupMouseOverHandler=null;this._popupMouseOutHandler=null;this._bodyClickHandler=null;this._hoverTimeoutID=undefined;this._unhoverTimeoutID=undefined};AjaxControlToolkit.PopupControlBehavior.prototype={initialize:function(){ULSxaw:;AjaxControlToolkit.PopupControlBehavior.callBaseMethod(this,"initialize");$common.prepareHiddenElementForATDeviceUpdate();var a=this.get_element();this._popupElement=$get(this._popupControlID);this._popupBehavior=$create(AjaxControlToolkit.PopupBehavior,{id:this.get_id()+"PopupBehavior",parentElement:a},null,null,this._popupElement);this._clickHandler=Function.createDelegate(this,this._onClick);this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);this._mouseOverHandler=Function.createDelegate(this,this._onMouseOver);this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut);this._popupClickHandler=Function.createDelegate(this,this._onPopupClick);this._popupMouseOverHandler=Function.createDelegate(this,this._onPopupMouseOver);this._popupMouseOutHandler=Function.createDelegate(this,this._onPopupMouseOut);this._bodyClickHandler=Function.createDelegate(this,this._onBodyClick);this._popupKeyDownHandler=Function.createDelegate(this,this._onPopupKeyDown);$addHandler(a,"click",this._clickHandler);$addHandler(a,"keydown",this._keyDownHandler);$addHandler(a,"mouseover",this._mouseOverHandler);$addHandler(a,"mouseout",this._mouseOutHandler);$addHandler(document.body,"click",this._bodyClickHandler);$addHandler(this._popupElement,"click",this._popupClickHandler);$addHandler(this._popupElement,"keydown",this._popupKeyDownHandler);$addHandler(this._popupElement,"mouseover",this._popupMouseOverHandler);$addHandler(this._popupElement,"mouseout",this._popupMouseOutHandler);AdjustPopupPanel(this._popupElement,a)},dispose:function(){ULSxaw:;var a=this.get_element();if(this._popupBehavior){this._popupBehavior.dispose();this._popupBehavior=null}if(this._clickHandler){$removeHandler(a,"click",this._clickHandler);this._clickHandler=null}if(this._keyDownHandler){$removeHandler(a,"keydown",this._keyDownHandler);this._keyDownHandler=null}if(this._mouseOverHandler){$removeHandler(a,"mouseover",this._mouseOverHandler);this._mouseOverHandler=null}if(this._mouseOutHandler){$removeHandler(a,"mouseout",this._mouseOutHandler);this._mouseOutHandler=null}if(this._bodyClickHandler){$removeHandler(document.body,"click",this._bodyClickHandler);this._bodyClickHandler=null}if(this._popupClickHandler){$removeHandler(this._popupElement,"click",this._popupClickHandler);this._popupClickHandler=null}if(this._popupKeyDownHandler){$removeHandler(this._popupElement,"keydown",this._popupKeyDownHandler);this._popupKeyDownHandler=null}if(this._popupMouseOverHandler){$removeHandler(this._popupElement,"mouseover",this._popupMouseOverHandler);this._popupMouseOverHandler=null}if(this._popupMouseOutHandler){$removeHandler(this._popupElement,"mouseout",this._popupMouseOutHandler);this._popupMouseOutHandler=null}AjaxControlToolkit.PopupControlBehavior.callBaseMethod(this,"dispose")},clearHoverTimer:function(){ULSxaw:;if(this._hoverDelay&&this._hoverDelay>0&&this._hoverTimeoutID){window.clearTimeout(this._hoverTimeoutID);this._hoverTimeoutID=undefined}},setHoverTimer:function(){ULSxaw:;if(this._hoverDelay&&this._hoverDelay>0){this._hoverTimeoutID=window.setTimeout(Function.createDelegate(this,this.showPopup),this._hoverDelay);return true}else return false},clearUnhoverTimer:function(){ULSxaw:;if(this._unhoverDelay&&this._unhoverDelay>0&&this._unhoverTimeoutID){window.clearTimeout(this._unhoverTimeoutID);this._unhoverTimeoutID=undefined}},setUnhoverTimer:function(){ULSxaw:;if(this._unhoverDelay&&this._unhoverDelay>0){this._unhoverTimeoutID=window.setTimeout(Function.createDelegate(this,this.hidePopup),this._unhoverDelay);return true}else return false},showPopup:function(){ULSxaw:;var old=AjaxControlToolkit.PopupControlBehavior.__VisiblePopup;old&&old._popupBehavior&&old.hidePopup();var element=this.get_element();(element&&Sys.Browser.agent!=Sys.Browser.InternetExplorer||document.documentMode&&document.documentMode!=7)&&element.parentNode.insertBefore(this._popupElement,element.nextSibling);this.clearHoverTimer();if(this._popupShowingScript)eval(this._popupShowingScript);this._popupBehavior.show();if(this._popupElement&&Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7)){var elementBounds=$common.getBounds(element);if(elementBounds){var x;if(this._popupElement.currentStyle.direction=="rtl"){var xOffset=0;if(document.documentElement.scrollHeight>document.documentElement.clientHeight)xOffset=16;x=elementBounds.x+elementBounds.width-this._popupElement.offsetWidth-xOffset}else x=elementBounds.x;var y=elementBounds.y+element.offsetHeight,bounds=new Sys.UI.Bounds(x,y,this._popupElement.offsetWidth,this._popupElement.offsetHeight);$common.setLocation(this._popupElement,bounds)}}this._popupVisible=true;AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=this},hidePopup:function(){ULSxaw:;this.clearUnhoverTimer();this._popupBehavior.hide();if(this._popupHiddenScript)eval(this._popupHiddenScript);this._popupVisible=false;AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=null},hidePopupReturnFocus:function(){ULSxaw:;if(this._popupVisible){this.hidePopup();this.get_element().focus()}},_onClick:function(a){ULSxaw:;!this._popupVisible&&this.showPopup();a&&a.stopPropagation()},_onKeyDown:function(a){ULSxaw:;a.keyCode==27&&this.hidePopupReturnFocus()},_onMouseOver:function(){ULSxaw:;this.clearUnhoverTimer();!this._popupVisible&&this.setHoverTimer()},_onMouseOut:function(){ULSxaw:;this.clearHoverTimer();this._popupVisible&&this.setUnhoverTimer()},_onPopupKeyDown:function(a){ULSxaw:;a.keyCode==27&&this.hidePopupReturnFocus()},_onPopupMouseOver:function(){ULSxaw:;this._popupVisible&&this.clearUnhoverTimer()},_onPopupMouseOut:function(){ULSxaw:;this._popupVisible&&this.setUnhoverTimer()},_onPopupClick:function(a){ULSxaw:;this._popupVisible&&a.stopPropagation()},_onBodyClick:function(){ULSxaw:;this._popupVisible&&this.hidePopup()},get_PopupControlID:function(){ULSxaw:;return this._popupControlID},set_PopupControlID:function(a){ULSxaw:;if(this._popupControlID!=a){this._popupControlID=a;this.raisePropertyChanged("PopupControlID")}},get_PopupShowingScript:function(){ULSxaw:;return this._popupShowingScript},set_PopupShowingScript:function(a){ULSxaw:;if(this._popupShowingScript!=a){this._popupShowingScript=a;this.raisePropertyChanged("PopupShowingScript")}},get_PopupHiddenScript:function(){ULSxaw:;return this._popupHiddenScript},set_PopupHiddenScript:function(a){ULSxaw:;if(this._popupHiddenScript!=a){this._popupHiddenScript=a;this.raisePropertyChanged("PopupHiddenScript")}},get_HoverDelay:function(){ULSxaw:;return this._hoverDelay},set_HoverDelay:function(a){ULSxaw:;if(this._hoverDelay!=a){this._hoverDelay=a;this.raisePropertyChanged("HoverDelay")}},get_UnhoverDelay:function(){ULSxaw:;return this._unhoverDelay},set_UnhoverDelay:function(a){ULSxaw:;if(this._unhoverDelay!=a){this._unhoverDelay=a;this.raisePropertyChanged("UnhoverDelay")}},get_PopupVisible:function(){ULSxaw:;return this._popupVisible}};AjaxControlToolkit.PopupControlBehavior.registerClass("AjaxControlToolkit.PopupControlBehavior",Sys.UI.Behavior);AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=null;AjaxControlToolkit.AutoCompleteBehavior=function(a){ULSxaw:;AjaxControlToolkit.AutoCompleteBehavior.initializeBase(this,[a]);this._servicePath=null;this._serviceMethod=null;this._contextKey=null;this._useContextKey=false;this._serviceIsSearchQuery=false;this._enterKeyDownScript=null;this._minimumPrefixLength=3;this._completionSetCount=10;this._completionInterval=1e3;this._completionListElementID=null;this._completionListElement=null;this._popupBehavior=null;this._popupBehaviorHiddenHandler=null;this._timer=null;this._cache=null;this._currentPrefix=null;this._selectIndex=-1;this._highlightedItem=null;this._focusHandler=null;this._blurHandler=null;this._bodyClickHandler=null;this._completionListBlurHandler=null;this._keyDownHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;this._tickHandler=null;this._enableCaching=true;this._textBoxHasFocus=false;this._completionListCssClass=null;this._completionListItemCssClass=null;this._highlightedItemCssClass=null;this._firstRowSelected=false;this._webRequest=null};AjaxControlToolkit.AutoCompleteBehavior.prototype={initialize:function(){ULSxaw:;AjaxControlToolkit.AutoCompleteBehavior.callBaseMethod(this,"initialize");$common.prepareHiddenElementForATDeviceUpdate();this._popupBehaviorHiddenHandler=Function.createDelegate(this,this._popupHidden);this._tickHandler=Function.createDelegate(this,this._onTimerTick);this._focusHandler=Function.createDelegate(this,this._onGotFocus);this._blurHandler=Function.createDelegate(this,this._onLostFocus);this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);this._mouseDownHandler=Function.createDelegate(this,this._onListMouseDown);this._mouseOverHandler=Function.createDelegate(this,this._onListMouseOver);this._completionListBlurHandler=Function.createDelegate(this,this._onCompletionListBlur);this._bodyClickHandler=Function.createDelegate(this,this._onCompletionListBlur);this._timer=new Sys.Timer;this.initializeTimer(this._timer);var b=this.get_element();this.initializeTextBox(b);if(this._completionListElementID!==null)this._completionListElement=$get(this._completionListElementID);if(this._completionListElement==null){this._completionListElement=document.createElement("ul");this._completionListElement.id=this.get_id()+"_AutoCompContainer";if(Sys.Browser.agent===Sys.Browser.Safari)document.body.appendChild(this._completionListElement);else b.parentNode.insertBefore(this._completionListElement,b.nextSibling)}this.initializeCompletionList(this._completionListElement);var a=this._getPopupContainer(this._completionListElement);if(a&&Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7))a.style.marginTop="-1px";this._popupBehavior=$create(AjaxControlToolkit.PopupBehavior,{id:this.get_id()+"PopupBehavior",parentElement:this._getPopupPositionParent()},null,null,a);this._popupBehavior.add_hidden(this._popupBehaviorHiddenHandler)},dispose:function(){ULSxaw:;if(this._popupBehavior){this._popupBehaviorHiddenHandler&&this._popupBehavior.remove_hidden(this._popupBehaviorHiddenHandler);this._popupBehavior.dispose();this._popupBehavior=null}if(this._timer){this._timer.dispose();this._timer=null}var a=this.get_element();if(a){$removeHandler(a,"focus",this._focusHandler);$removeHandler(a,"blur",this._blurHandler);$removeHandler(a,"keydown",this._keyDownHandler);$removeHandler(this._completionListElement,"blur",this._completionListBlurHandler);$removeHandler(this._completionListElement,"mousedown",this._mouseDownHandler);$removeHandler(this._completionListElement,"mouseover",this._mouseOverHandler)}if(this._bodyClickHandler){$removeHandler(document.body,"click",this._bodyClickHandler);this._bodyClickHandler=null}this._popupBehaviorHiddenHandler=null;this._tickHandler=null;this._focusHandler=null;this._blurHandler=null;this._keyDownHandler=null;this._completionListBlurHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;AjaxControlToolkit.AutoCompleteBehavior.callBaseMethod(this,"dispose")},initializeTimer:function(a){ULSxaw:;a.set_interval(this._completionInterval);a.add_tick(this._tickHandler)},initializeTextBox:function(a){ULSxaw:;a.autocomplete="off";$addHandler(a,"focus",this._focusHandler);$addHandler(a,"blur",this._blurHandler);$addHandler(a,"keydown",this._keyDownHandler)},initializeCompletionList:function(a){ULSxaw:;this._completionListCssClass&&Sys.UI.DomElement.addCssClass(a,this._completionListCssClass);$addHandler(a,"mousedown",this._mouseDownHandler);$addHandler(a,"mouseover",this._mouseOverHandler);$addHandler(a,"blur",this._completionListBlurHandler);$addHandler(document.body,"click",this._bodyClickHandler)},_getPopupPositionParent:function(){ULSxaw:;return this.get_element().parentNode},_getPopupContainer:function(b){ULSxaw:;var c="AutoCompContainer",a=b;while(a){if(a.id.endsWith(c))return a;a=a.parentNode}return b},_currentCompletionWord:function(){ULSxaw:;var a=this.get_element();return a.value},_getText:function(a){ULSxaw:;if(a)return a.innerText||a.textContent||a;else return ""},_hideCompletionList:function(){ULSxaw:;this.hidePopup()},showPopup:function(){ULSxaw:;this._popupBehavior.show()},hidePopup:function(){ULSxaw:;if(this._popupBehavior)this._popupBehavior.hide();else this._popupHidden()},_popupHidden:function(){ULSxaw:;this._completionListElement.innerHTML="";this._selectIndex=-1;this._highlightedItem=null},_highlightItem:function(a){ULSxaw:;if(this._highlightedItem){if(this._completionListItemCssClass){Sys.UI.DomElement.removeCssClass(this._highlightedItem,this._highlightedItemCssClass);Sys.UI.DomElement.addCssClass(this._highlightedItem,this._completionListItemCssClass)}this._highlightedItem=null}if(a){if(this._highlightedItemCssClass){Sys.UI.DomElement.removeCssClass(a,this._completionListItemCssClass);Sys.UI.DomElement.addCssClass(a,this._highlightedItemCssClass)}this._highlightedItem=a}},_getCompletionListItem:function(a){ULSxaw:;if(a)if(a._index!=null&&a._index!=undefined)return a;else if(a===this._completionListElement)return null;else return this._getCompletionListItem(a.parentNode);else return null},_onCompletionListBlur:function(){ULSxaw:;this._hideCompletionList()},_onListMouseDown:function(ev){ULSxaw:;var item=this._getCompletionListItem(ev.target);if(item!=null){this._setText(item,true);suggestedQuery=true;if(this._enterKeyDownScript)eval(this._enterKeyDownScript)}},_onListMouseOver:function(b){ULSxaw:;var a=this._getCompletionListItem(b.target);if(a!=null){this._highlightItem(a);this._selectIndex=parseInt(a._index)}},_onGotFocus:function(){ULSxaw:;this._textBoxHasFocus=true},_onKeyDown:function(ev){ULSxaw:;this._timer.set_enabled(false);var k=ev.keyCode?ev.keyCode:ev.rawEvent.keyCode;if(k===Sys.UI.Key.esc){this._setText(this._currentPrefix,true);suggestedQuery=false;ev.preventDefault()}else if(k===Sys.UI.Key.up){if(this._selectIndex>-1)this._selectIndex--;else this._selectIndex=this._completionListElement.childNodes.length-1;if(this._selectIndex==-1){this._highlightItem(null);this._setText(this._currentPrefix,false);suggestedQuery=false}else{this._handleScroll(this._completionListElement.childNodes[this._selectIndex],this._selectIndex);this._highlightItem(this._completionListElement.childNodes[this._selectIndex]);this._setText(this._completionListElement.childNodes[this._selectIndex],false);suggestedQuery=true}ev.stopPropagation();ev.preventDefault()}else if(k===Sys.UI.Key.down){if(this._selectIndex<this._completionListElement.childNodes.length-1)this._selectIndex++;else this._selectIndex=-1;if(this._selectIndex==-1){this._highlightItem(null);this._setText(this._currentPrefix,false);suggestedQuery=false}else{this._handleScroll(this._completionListElement.childNodes[this._selectIndex],this._selectIndex);this._highlightItem(this._completionListElement.childNodes[this._selectIndex]);this._setText(this._completionListElement.childNodes[this._selectIndex],false);suggestedQuery=true}ev.stopPropagation();ev.preventDefault()}else if(k===Sys.UI.Key.enter)if(this._selectIndex!==-1){if(this._enterKeyDownScript)eval(this._enterKeyDownScript);this._hideCompletionList();ev.preventDefault()}else this.hidePopup();else if(k===Sys.UI.Key.tab){if(this._selectIndex!==-1){this._setText(this._completionListElement.childNodes[this._selectIndex],true);suggestedQuery=true}}else if(!(k===Sys.UI.Key.right||k===Sys.UI.Key.left||k===Sys.UI.Key.pageUp||k===Sys.UI.Key.pageDown||k===Sys.UI.Key.home||k===Sys.UI.Key.end)){!this._textBoxHasFocus&&this._onGotFocus();this._timer.set_enabled(true);suggestedQuery=false}},_handleScroll:function(e,c){ULSxaw:;var a=this._completionListElement,b=$common.getBounds(e),d=this._completionListElement.childNodes.length;if(b.height*c-(a.clientHeight+a.scrollTop)>=0)a.scrollTop+=b.height*c-(a.clientHeight+a.scrollTop)+b.height;if(b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)>=0)a.scrollTop-=b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)+b.height;if(a.scrollTop%b.height!==0)if(b.height*(c+1)-(a.clientHeight+a.scrollTop)>=0)a.scrollTop-=a.scrollTop%b.height;else a.scrollTop+=b.height-a.scrollTop%b.height},_onLostFocus:function(){ULSxaw:;this._textBoxHasFocus=false;this._timer.set_enabled(false);if(this._webRequest){this._webRequest.get_executor().abort();this._webRequest=null}this._hideCompletionList()},_onMethodComplete:function(b,a){ULSxaw:;this._webRequest=null;this._update(a,b,true)},_onMethodFailed:function(){ULSxaw:;this._webRequest=null},_onTimerTick:function(){ULSxaw:;this._timer.set_enabled(false);if(this._servicePath&&this._serviceMethod){var a=this._currentCompletionWord();if(a.trim().length<this._minimumPrefixLength){this._currentPrefix=null;this._hideCompletionList();return}this._currentPrefix=a;if(a!=""&&this._cache&&this._cache[a]){this._update(a,this._cache[a],false);return}var b=null;if(this._serviceIsSearchQuery){var d=navigator.userLanguage?navigator.userLanguage:navigator.language,c='<?xml version="1.0" encoding="utf-8" ?><QueryPacket xmlns="urn:Microsoft.Search.Query" Revision="1"><Query domain="QDomain"><Context><QueryText language="'+STSHtmlEncode(d)+'" type="STRING">'+STSHtmlEncode(this._currentPrefix)+"</QueryText></Context><Range><StartAt>1</StartAt><Count>"+STSHtmlEncode(this._completionSetCount.toString())+"</Count></Range><PreQuerySuggestions>true</PreQuerySuggestions><HighlightQuerySuggestions>false</HighlightQuerySuggestions></Query></QueryPacket>";b={queryXml:c}}else{b={prefixText:this._currentPrefix,count:this._completionSetCount};if(this._useContextKey)b.contextKey=this._contextKey}if(this._webRequest){this._webRequest.get_executor().abort();this._webRequest=null}this._webRequest=Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),this.get_serviceMethod(),false,b,Function.createDelegate(this,this._onMethodComplete),Function.createDelegate(this,this._onMethodFailed),a);$common.updateFormToRefreshATDeviceBuffer()}},_setText:function(e,d){ULSxaw:;this._timer.set_enabled(false);var c=this._getText(e),b=this.get_element(),a=b.control;if(a&&a.set_text)a.set_text(c);else b.value=c;d&&this._hideCompletionList()},_update:function(i,b,m){ULSxaw:;if(m&&this.get_enableCaching()){if(!this._cache)this._cache={};this._cache[i]=b}if(!this._textBoxHasFocus||i!=this._currentCompletionWord())return;if(b&&b.length){this._completionListElement.innerHTML="";this._selectIndex=-1;this._highlightedItem=null;for(var e=null,g=null,f=null,c=0;c<b.length;c++){var a=null;if(this._completionListElementID)a=document.createElement("div");else a=document.createElement("li");if(e==null)e=a;if(this._serviceIsSearchQuery)a.innerHTML=b[c];else{try{var d=Sys.Serialization.JavaScriptSerializer.deserialize("("+b[c]+")");if(d&&d.First){g=d.First;f=d.Second}else{g=d;f=d}}catch(n){g=b[c];f=b[c]}a.appendChild(document.createTextNode(g))}a._value=f;a.__item="";a._index=c;this._completionListItemCssClass&&Sys.UI.DomElement.addCssClass(a,this._completionListItemCssClass);this._completionListElement.appendChild(a)}var l=$common.getBounds(this._getPopupPositionParent()),j=l.width,h=this._getPopupPositionParent().nextSibling;if(h){var k=$common.getBounds(h);j+=k.width}this._completionListElement.style.width=j-2+"px";this._completionListElement.scrollTop=0;this.showPopup();if(this._firstRowSelected&&e!=null){this._highlightItem(e);this._selectIndex=0}}else this._hideCompletionList()},get_completionInterval:function(){ULSxaw:;return this._completionInterval},set_completionInterval:function(a){ULSxaw:;if(this._completionInterval!=a){this._completionInterval=a;this.raisePropertyChanged("completionInterval")}},get_completionList:function(){ULSxaw:;return this._completionListElement},set_completionList:function(a){ULSxaw:;if(this._completionListElement!=a){this._completionListElement=a;this.raisePropertyChanged("completionList")}},get_completionSetCount:function(){ULSxaw:;return this._completionSetCount},set_completionSetCount:function(a){ULSxaw:;if(this._completionSetCount!=a){this._completionSetCount=a;this.raisePropertyChanged("completionSetCount")}},get_minimumPrefixLength:function(){ULSxaw:;return this._minimumPrefixLength},set_minimumPrefixLength:function(a){ULSxaw:;if(this._minimumPrefixLength!=a){if(a<1)a=1;this._minimumPrefixLength=a;this.raisePropertyChanged("minimumPrefixLength")}},get_serviceMethod:function(){ULSxaw:;return this._serviceMethod},set_serviceMethod:function(a){ULSxaw:;if(this._serviceMethod!=a){this._serviceMethod=a;this.raisePropertyChanged("serviceMethod")}},get_servicePath:function(){ULSxaw:;return this._servicePath},set_servicePath:function(a){ULSxaw:;if(this._servicePath!=a){this._servicePath=a;this.raisePropertyChanged("servicePath")}},get_contextKey:function(){ULSxaw:;return this._contextKey},set_contextKey:function(a){ULSxaw:;if(this._contextKey!=a){this._contextKey=a;this.set_useContextKey(true);this.raisePropertyChanged("contextKey")}},get_useContextKey:function(){ULSxaw:;return this._useContextKey},set_useContextKey:function(a){ULSxaw:;if(this._useContextKey!=a){this._useContextKey=a;this.raisePropertyChanged("useContextKey")}},get_serviceIsSearchQuery:function(){ULSxaw:;return this._serviceIsSearchQuery},set_serviceIsSearchQuery:function(a){ULSxaw:;if(this._serviceIsSearchQuery!=a){this._serviceIsSearchQuery=a;this.raisePropertyChanged("serviceIsSearchQuery")}},get_enterKeyDownScript:function(){ULSxaw:;return this._enterKeyDownScript},set_enterKeyDownScript:function(a){ULSxaw:;if(this._enterKeyDownScript!=a){this._enterKeyDownScript=a;this.raisePropertyChanged("enterKeyDownScript")}},get_enableCaching:function(){ULSxaw:;return this._enableCaching},set_enableCaching:function(a){ULSxaw:;if(this._enableCaching!=a){this._enableCaching=a;this.raisePropertyChanged("enableCaching")}},get_completionListElementID:function(){ULSxaw:;return this._completionListElementID},set_completionListElementID:function(a){ULSxaw:;if(this._completionListElementID!=a){this._completionListElementID=a;this.raisePropertyChanged("completionListElementID")}},get_completionListCssClass:function(){ULSxaw:;return this._completionListCssClass},set_completionListCssClass:function(a){ULSxaw:;if(this._completionListCssClass!=a){this._completionListCssClass=a;this.raisePropertyChanged("completionListCssClass")}},get_completionListItemCssClass:function(){ULSxaw:;return this._completionListItemCssClass},set_completionListItemCssClass:function(a){ULSxaw:;if(this._completionListItemCssClass!=a){this._completionListItemCssClass=a;this.raisePropertyChanged("completionListItemCssClass")}},get_highlightedItemCssClass:function(){ULSxaw:;return this._highlightedItemCssClass},set_highlightedItemCssClass:function(a){ULSxaw:;if(this._highlightedItemCssClass!=a){this._highlightedItemCssClass=a;this.raisePropertyChanged("highlightedItemCssClass")}},get_firstRowSelected:function(){ULSxaw:;return this._firstRowSelected},set_firstRowSelected:function(a){ULSxaw:;if(this._firstRowSelected!=a){this._firstRowSelected=a;this.raisePropertyChanged("firstRowSelected")}}};AjaxControlToolkit.AutoCompleteBehavior.registerClass("AjaxControlToolkit.AutoCompleteBehavior",Sys.UI.Behavior);AjaxControlToolkit.AutoCompleteBehavior.descriptor={properties:[{name:"completionInterval",type:Number},{name:"completionList",isDomElement:true},{name:"completionListElementID",type:String},{name:"completionSetCount",type:Number},{name:"minimumPrefixLength",type:Number},{name:"serviceMethod",type:String},{name:"servicePath",type:String},{name:"enableCaching",type:Boolean}]}